{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import api from\"../api\";function Streams(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),channels=_useState2[0],setChannels=_useState2[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,dataArray,gameIDs,baseURL,queryParams,finalURL,gameNames,gameNameArray,finalArray;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"https://api.twitch.tv/helix/streams\");case 2:result=_context.sent;dataArray=result.data.data;gameIDs=dataArray.map(function(streams){return streams.game_id;});baseURL=\"https://api.twitch.tv/helix/games?\";queryParams=\"\";gameIDs.map(function(id){return queryParams=queryParams+\"id=?\".concat(id,\"&\");});finalURL=baseURL+queryParams;_context.next=11;return api.get(finalURL);case 11:gameNames=_context.sent;gameNameArray=gameNames.data.data;finalArray=dataArray.map(function(stream){stream.gameName=\"\";gameNameArray.map(function(name){if(stream.game_id===name.id){return stream.gameName=name.name;}});var newURL=stream.thumbnail_url.replace(\"{width}\",\"300\").replace(\"{height}\",\"300\");stream.thumbnail_url=newURL;return stream;});setChannels(finalArray);case 15:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Most Popular Live Streams\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},channels.map(function(channel){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-6 col-sm-12 mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"img\",{className:\"card-img-top\",src:channel.thumbnail_url}),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"card-title\"},channel.user_name),/*#__PURE__*/React.createElement(\"h5\",{className:\"card-text\"},channel.gameName),/*#__PURE__*/React.createElement(\"div\",{className:\"card-text\"},channel.viewer_count,\" live viewers\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\"},/*#__PURE__*/React.createElement(\"a\",{href:\"https://twitch.tv/\"+channel.user_name,className:\"link\",target:\"_blank\"},\"watch \",channel.user_name,\"'s' stream\")))));})));}export default Streams;","map":{"version":3,"sources":["/Users/aaron.lau/dev/react-twitch-viewer/src/components/Streams.js"],"names":["React","useState","useEffect","api","Streams","channels","setChannels","fetchData","get","result","dataArray","data","gameIDs","map","streams","game_id","baseURL","queryParams","id","finalURL","gameNames","gameNameArray","finalArray","stream","gameName","name","newURL","thumbnail_url","replace","channel","user_name","viewer_count"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CACA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CACA,QAASC,CAAAA,OAAT,EAAmB,eACeH,QAAQ,CAAC,EAAD,CADvB,wCACVI,QADU,eACAC,WADA,eAEjBJ,SAAS,CAAC,UAAM,CACd,GAAMK,CAAAA,SAAS,0FAAG,sPACKJ,CAAAA,GAAG,CAACK,GAAJ,CAAQ,qCAAR,CADL,QACVC,MADU,eAEZC,SAFY,CAEAD,MAAM,CAACE,IAAP,CAAYA,IAFZ,CAGZC,OAHY,CAGFF,SAAS,CAACG,GAAV,CAAc,SAAAC,OAAO,CAAI,CACrC,MAAOA,CAAAA,OAAO,CAACC,OAAf,CACD,CAFa,CAHE,CAOZC,OAPY,CAOF,oCAPE,CAQZC,WARY,CAQE,EARF,CAShBL,OAAO,CAACC,GAAR,CAAY,SAAAK,EAAE,CAAI,CAChB,MAAQD,CAAAA,WAAW,CAAGA,WAAW,eAAUC,EAAV,KAAjC,CACD,CAFD,EAIIC,QAbY,CAaDH,OAAO,CAAGC,WAbT,wBAcMd,CAAAA,GAAG,CAACK,GAAJ,CAAQW,QAAR,CAdN,SAcZC,SAdY,eAeZC,aAfY,CAeID,SAAS,CAACT,IAAV,CAAeA,IAfnB,CAiBZW,UAjBY,CAiBCZ,SAAS,CAACG,GAAV,CAAc,SAAAU,MAAM,CAAI,CACvCA,MAAM,CAACC,QAAP,CAAkB,EAAlB,CACAH,aAAa,CAACR,GAAd,CAAkB,SAAAY,IAAI,CAAI,CACxB,GAAIF,MAAM,CAACR,OAAP,GAAmBU,IAAI,CAACP,EAA5B,CAAgC,CAC9B,MAAQK,CAAAA,MAAM,CAACC,QAAP,CAAkBC,IAAI,CAACA,IAA/B,CACD,CACF,CAJD,EAMA,GAAIC,CAAAA,MAAM,CAAGH,MAAM,CAACI,aAAP,CACVC,OADU,CACF,SADE,CACS,KADT,EAEVA,OAFU,CAEF,UAFE,CAEU,KAFV,CAAb,CAGAL,MAAM,CAACI,aAAP,CAAuBD,MAAvB,CACA,MAAOH,CAAAA,MAAP,CACD,CAbgB,CAjBD,CA+BhBjB,WAAW,CAACgB,UAAD,CAAX,CA/BgB,uDAAH,kBAATf,CAAAA,SAAS,0CAAf,CAiCAA,SAAS,GACV,CAnCQ,CAmCN,EAnCM,CAAT,CAoCA,mBACE,4CACE,0DADF,cAEE,2BAAK,SAAS,CAAC,KAAf,EACGF,QAAQ,CAACQ,GAAT,CAAa,SAAAgB,OAAO,qBACnB,2BAAK,SAAS,CAAC,kCAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEA,OAAO,CAACF,aAA3C,EADF,cAEE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,YAAd,EAA4BE,OAAO,CAACC,SAApC,CADF,cAEE,0BAAI,SAAS,CAAC,WAAd,EAA2BD,OAAO,CAACL,QAAnC,CAFF,cAGE,2BAAK,SAAS,CAAC,WAAf,EACGK,OAAO,CAACE,YADX,iBAHF,cAME,8BAAQ,SAAS,CAAC,iBAAlB,eACE,yBACE,IAAI,CAAE,qBAAuBF,OAAO,CAACC,SADvC,CAEE,SAAS,CAAC,MAFZ,CAGE,MAAM,CAAC,QAHT,WAKSD,OAAO,CAACC,SALjB,cADF,CANF,CAFF,CADF,CADmB,EAApB,CADH,CAFF,CADF,CA8BD,CAED,cAAe1B,CAAAA,OAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport api from \"../api\";\nfunction Streams() {\n  const [channels, setChannels] = useState([]);\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await api.get(\"https://api.twitch.tv/helix/streams\");\n      let dataArray = result.data.data;\n      let gameIDs = dataArray.map(streams => {\n        return streams.game_id;\n      });\n\n      let baseURL = \"https://api.twitch.tv/helix/games?\";\n      let queryParams = \"\";\n      gameIDs.map(id => {\n        return (queryParams = queryParams + `id=?${id}&`);\n      });\n\n      let finalURL = baseURL + queryParams;\n      let gameNames = await api.get(finalURL);\n      let gameNameArray = gameNames.data.data;\n\n      let finalArray = dataArray.map(stream => {\n        stream.gameName = \"\";\n        gameNameArray.map(name => {\n          if (stream.game_id === name.id) {\n            return (stream.gameName = name.name);\n          }\n        });\n\n        let newURL = stream.thumbnail_url\n          .replace(\"{width}\", \"300\")\n          .replace(\"{height}\", \"300\");\n        stream.thumbnail_url = newURL;\n        return stream;\n      });\n      setChannels(finalArray);\n    };\n    fetchData();\n  }, []);\n  return (\n    <div>\n      <h1>Most Popular Live Streams</h1>\n      <div className=\"row\">\n        {channels.map(channel => (\n          <div className=\"col-lg-4 col-md-6 col-sm-12 mt-5\">\n            <div className=\"card\">\n              <img className=\"card-img-top\" src={channel.thumbnail_url} />\n              <div className=\"card-body\">\n                <h3 className=\"card-title\">{channel.user_name}</h3>\n                <h5 className=\"card-text\">{channel.gameName}</h5>\n                <div className=\"card-text\">\n                  {channel.viewer_count} live viewers\n                </div>\n                <button className=\"btn btn-success\">\n                  <a\n                    href={\"https://twitch.tv/\" + channel.user_name}\n                    className=\"link\"\n                    target=\"_blank\"\n                  >\n                    watch {channel.user_name}'s' stream\n                  </a>\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default Streams;\n"]},"metadata":{},"sourceType":"module"}