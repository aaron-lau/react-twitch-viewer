{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/aaron.lau/dev/react-twitch-viewer/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import api from\"../api\";function GameStreams(_ref){var match=_ref.match,location=_ref.location;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),streamData=_useState2[0],setStreamData=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),viewers=_useState4[0],setViewers=_useState4[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,dataArray,finalArray,totalViewers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return api.get(\"https://api.twitch.tv/helix/streams?game_id=\".concat(location.state.gameID));case 2:result=_context.sent;dataArray=result.data.data;finalArray=dataArray.map(function(stream){var newURL=stream.thumbnail_url.replace(\"{width}\",\"300\").replace(\"{height}\",\"300\");stream.thumbnail_url=newURL;return stream;});totalViewers=finalArray.reduce(function(acc,val){return acc+val.viewer_count;},0);setViewers(totalViewers);setStreamData(finalArray);case 8:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center\"},match.params.id,\" Streams\"),/*#__PURE__*/React.createElement(\"h3\",{className:\"text-center\"},/*#__PURE__*/React.createElement(\"strong\",{className:\"text-primary\"},viewers),\" people currently watch \",match.params.id),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},streamData.map(function(stream){return/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-4 col-md-6 col-sm-12 mt-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"img\",{className:\"card-img-top\",src:stream.thumbnail_url}),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-title\"},stream.user_name),/*#__PURE__*/React.createElement(\"div\",{className:\"card-text\"},stream.viewer_count,\" live viewers\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success\"},/*#__PURE__*/React.createElement(\"a\",{className:\"link\",href:\"https://twitch.tv/\"+stream.user_name,target:\"_blank\"},\"watch \",stream.user_name,\"'s channel\")))));})));}export default GameStreams;","map":{"version":3,"sources":["/Users/aaron.lau/dev/react-twitch-viewer/src/components/GameStreams.js"],"names":["React","useState","useEffect","api","GameStreams","match","location","streamData","setStreamData","viewers","setViewers","fetchData","get","state","gameID","result","dataArray","data","finalArray","map","stream","newURL","thumbnail_url","replace","totalViewers","reduce","acc","val","viewer_count","params","id","user_name"],"mappings":"0dAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA2C,OAA3C,CAEA,MAAOC,CAAAA,GAAP,KAAgB,QAAhB,CACA,QAASC,CAAAA,WAAT,MAA0C,IAAnBC,CAAAA,KAAmB,MAAnBA,KAAmB,CAAZC,QAAY,MAAZA,QAAY,eACJL,QAAQ,CAAC,EAAD,CADJ,wCACjCM,UADiC,eACrBC,aADqB,8BAEVP,QAAQ,CAAC,CAAD,CAFE,yCAEjCQ,OAFiC,eAExBC,UAFwB,eAIxCR,SAAS,CAAC,UAAM,CACd,GAAMS,CAAAA,SAAS,2FAAG,sMACKR,CAAAA,GAAG,CAACS,GAAJ,uDAC4BN,QAAQ,CAACO,KAAT,CAAeC,MAD3C,EADL,QACVC,MADU,eAIZC,SAJY,CAIAD,MAAM,CAACE,IAAP,CAAYA,IAJZ,CAKZC,UALY,CAKCF,SAAS,CAACG,GAAV,CAAc,SAAAC,MAAM,CAAI,CACvC,GAAIC,CAAAA,MAAM,CAAGD,MAAM,CAACE,aAAP,CACVC,OADU,CACF,SADE,CACS,KADT,EAEVA,OAFU,CAEF,UAFE,CAEU,KAFV,CAAb,CAGAH,MAAM,CAACE,aAAP,CAAuBD,MAAvB,CACA,MAAOD,CAAAA,MAAP,CACD,CANgB,CALD,CAaZI,YAbY,CAaGN,UAAU,CAACO,MAAX,CAAkB,SAACC,GAAD,CAAMC,GAAN,CAAc,CACjD,MAAOD,CAAAA,GAAG,CAAGC,GAAG,CAACC,YAAjB,CACD,CAFkB,CAEhB,CAFgB,CAbH,CAgBhBlB,UAAU,CAACc,YAAD,CAAV,CACAhB,aAAa,CAACU,UAAD,CAAb,CAjBgB,sDAAH,kBAATP,CAAAA,SAAS,2CAAf,CAmBAA,SAAS,GACV,CArBQ,CAqBN,EArBM,CAAT,CAsBA,mBACE,4CACE,0BAAI,SAAS,CAAC,aAAd,EAA6BN,KAAK,CAACwB,MAAN,CAAaC,EAA1C,YADF,cAEE,0BAAI,SAAS,CAAC,aAAd,eACE,8BAAQ,SAAS,CAAC,cAAlB,EAAkCrB,OAAlC,CADF,4BAESJ,KAAK,CAACwB,MAAN,CAAaC,EAFtB,CAFF,cAME,2BAAK,SAAS,CAAC,KAAf,EACGvB,UAAU,CAACY,GAAX,CAAe,SAAAC,MAAM,qBACpB,2BAAK,SAAS,CAAC,kCAAf,eACE,2BAAK,SAAS,CAAC,MAAf,eACE,2BAAK,SAAS,CAAC,cAAf,CAA8B,GAAG,CAAEA,MAAM,CAACE,aAA1C,EADF,cAEE,2BAAK,SAAS,CAAC,WAAf,eACE,0BAAI,SAAS,CAAC,YAAd,EAA4BF,MAAM,CAACW,SAAnC,CADF,cAEE,2BAAK,SAAS,CAAC,WAAf,EACGX,MAAM,CAACQ,YADV,iBAFF,cAKE,8BAAQ,SAAS,CAAC,iBAAlB,eACE,yBACE,SAAS,CAAC,MADZ,CAEE,IAAI,CAAE,qBAAuBR,MAAM,CAACW,SAFtC,CAGE,MAAM,CAAC,QAHT,WAKSX,MAAM,CAACW,SALhB,cADF,CALF,CAFF,CADF,CADoB,EAArB,CADH,CANF,CADF,CAiCD,CAED,cAAe3B,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport api from \"../api\";\nfunction GameStreams({ match, location }) {\n  const [streamData, setStreamData] = useState([]);\n  const [viewers, setViewers] = useState(0);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const result = await api.get(\n        `https://api.twitch.tv/helix/streams?game_id=${location.state.gameID}`\n      );\n      let dataArray = result.data.data;\n      let finalArray = dataArray.map(stream => {\n        let newURL = stream.thumbnail_url\n          .replace(\"{width}\", \"300\")\n          .replace(\"{height}\", \"300\");\n        stream.thumbnail_url = newURL;\n        return stream;\n      });\n\n      let totalViewers = finalArray.reduce((acc, val) => {\n        return acc + val.viewer_count;\n      }, 0);\n      setViewers(totalViewers);\n      setStreamData(finalArray);\n    };\n    fetchData();\n  }, []);\n  return (\n    <div>\n      <h1 className=\"text-center\">{match.params.id} Streams</h1>\n      <h3 className=\"text-center\">\n        <strong className=\"text-primary\">{viewers}</strong> people currently\n        watch {match.params.id}\n      </h3>\n      <div className=\"row\">\n        {streamData.map(stream => (\n          <div className=\"col-lg-4 col-md-6 col-sm-12 mt-5\">\n            <div className=\"card\">\n              <img className=\"card-img-top\" src={stream.thumbnail_url} />\n              <div className=\"card-body\">\n                <h5 className=\"card-title\">{stream.user_name}</h5>\n                <div className=\"card-text\">\n                  {stream.viewer_count} live viewers\n                </div>\n                <button className=\"btn btn-success\">\n                  <a\n                    className=\"link\"\n                    href={\"https://twitch.tv/\" + stream.user_name}\n                    target=\"_blank\"\n                  >\n                    watch {stream.user_name}'s channel\n                  </a>\n                </button>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default GameStreams;\n"]},"metadata":{},"sourceType":"module"}